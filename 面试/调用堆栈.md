# 调用堆栈

## 理解JavaScript 中的执行上下文和执行栈

    #执行上下文的类型
      全局执行上下文
        只有一个 浏览器中的全局对象就是window对象, this指向这个全局对象  Nodejs中时global 
      函数执行上下文
        存在无数个, 只有函数被调用时才会被创建  每次调用函数都会创建一个新的执行上下文
      Eval 函数执行上下文

    #执行栈
      也叫调用栈, 具有后进先出(LIFO)结构, 用于储存在代码执行期间创建的所有执行上下文

      每当发生函数调用，引擎都会为该函数创建一个新的函数执行上下文并Push到当前执行栈的栈顶。

    #执行上下文的创建
      分为两个阶段:
        1、创建阶段
          确定this的值, 也被称为This Binding
          LexicalEnvironment（词法环境） 组件被创建。
          VariableEnvironment（变量环境） 组件被创建。

          This Binding
            全局执行上下文中 this -> window
            函数执行上下文中 this 的值取决于函数的调用方式
            默认绑定(window)、隐式绑定(xx.xx)、显式绑定(硬绑定 call, apply, bind)、new绑定、箭头函数

          词法环境
            词法环境有两个组成部分
              环境记录：存储变量和函数声明的实际位置
              对外部环境的引用：可以访问其外部词法环境

            词法环境有两种类型
              1、全局环境：是一个没有外部环境的词法环境，其外部环境引用为 null
              2、函数环境：用户在函数中定义的变量被存储在环境记录中，包含了arguments 对象
            
          变量环境
              区别 var  let const

              var 变量提升  
              let 暂时性死区 块级作用域
              const 暂时性死区 const声明一个只读的常量。一旦声明，常量的值就不能改变。
          
        2、执行阶段
          此阶段，完成对所有变量的分配，最后执行代码。



